(function() {
  var s = require('Storage').readJSON('@settings');
  if (s.HID) {
    Bangle.HID = new Uint8Array([
      0x05, 0x01,
      0x09, 0x06,
      0xA1, 0x01,
      0x05, 0x07,
      0x19, 0xe0,
      0x29, 0xe7,
      0x15, 0x00,
      0x25, 0x01,
      0x75, 0x01,
      0x95, 0x08,
      0x81, 0x02,
      0x95, 0x01,
      0x75, 0x08,
      0x81, 0x01,
      0x95, 0x05,
      0x75, 0x01,
      0x05, 0x08,
      0x19, 0x01,
      0x29, 0x05,
      0x91, 0x02,
      0x95, 0x01,
      0x75, 0x03,
      0x91, 0x01,
      0x95, 0x06,
      0x75, 0x08,
      0x15, 0x00,
      0x25, 0x73,
      0x05, 0x07,
      0x19, 0x00,
      0x29, 0x73,
      0x81, 0x00,
      0x09, 0x05,
      0x15, 0x00,
      0x26, 0xFF, 0x00,
      0x75, 0x08,
      0x95, 0x02,
      0xB1, 0x02,
      0xC0
    ]);
    NRF.setServices(undefined, {
      uart: true, hid: Bangle.HID,
    });
  }

  if (!s.vibrate) Bangle.buzz=()=>Promise.resolve();
  if (!s.beep) Bangle.beep=()=>Promise.resolve();
  Bangle.setLCDTimeout(s.timeout);
  if (!s.timeout) Bangle.setLCDPower(1);
  E.setTimeZone(s.timezone);
})();

